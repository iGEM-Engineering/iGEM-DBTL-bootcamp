# GitHub workflow and best practices

## Workflow

Here’s a description of a workflow to make changes to documents. There are multiple ways to go about this, but I think the one described here will be easiest for people new to GitHub. The sandbox.md document in the repo was created solely to practice making changes without worrying about anything, so feel free to play in that as much as you like to get comfortable!  

Since we want to track things using Issues, we will start from there. I created a ‘sandbox’ issue so we can practice with the linking, so if you don’t see it immediately under the ‘Issues’ tab check under ‘Closed’ and reopen it if it’s there. If you go through this completely and close the issue merging your pull request please try to remember to reopen the issue when you are finished. For actual changes, click on the issue you would like to address with a change in one of the documents. On the right, under ‘Development’ there is a link ‘Create a branch’ for this issue. Clicking on this will allow you to create a branch to make the changes you want to make. A ‘branch’ is git nomenclature [about branches](https://docs.github.com/en/pull-requests/collaborating-with-pull-requests/proposing-changes-to-your-work-with-pull-requests/about-branches) for a place where you can make changes to documents without having to worry about changing the current version of the shared documents until you are ready. Clicking the link to create a branch will open a window with some options. At the top is ‘Branch name’; making the branch from the issue will automatically put the issue number and title, please keep those for ease of tracking, and add to the end some words to describe the changes you intend to make. Below that is a ‘Repository destination’, you shouldn’t have to do anything to this, it should read ‘iGEM-Engineering/iGEM-DBTL-bootcamp’. Below that is ‘Branch source’, this should be ‘main’. Main is the current version of the shared documents we are all working on. If you click on it you can see all the other branches that are currently open, which represent changes that other people are making that have not yet been added to the shared documents. We could use this to collaboratively make big changes if needed, but it can get very complicated very fast, so for now I think making all branches from ‘main’ will be easiest. The last thing in this window is ‘What’s next?’, with ‘Checkout locally’ or ‘Open branch with GitHub Desktop’. I’ll assume most people will be working through the website so you’ll want the ‘Checkout locally’ option selected. These options should autopopulate, so all you should have to do is add some description of the changes you intend to make to the Branch name. When you are happy with the options there click the green ‘Create branch’ button at the bottom. It will present a window with some git commands to use on a local repo, you can just close this window and not worry about it if you are working on the website. 

We now have a branch, a safe place to make the changes we want to make without worrying that it will mess up anything in the main shared documents. On the issue page, you should now see this branch name on the right under ‘Development’ and if you click on it you will open the repository, or repo, the git nomenclature [about repositories](https://docs.github.com/en/repositories/creating-and-managing-repositories/about-repositories) for the folder containing all of the files for the bootcamp. On our branch we could change any of the files in the repo, without changing the current main shared version. On the repo page at the top left you should see the name of the branch you just made in the dropdown menu, this indicates that you are currently viewing and working on this branch. If you open the dropdown menu you will see ‘main’, which is the current version of the shared documents. You will also likely see multiple other branches, representing other changes that folks are making. You can make changes on other branches as well, which might be useful for large changes, but for now we’ll keep it simple and just work on the branch that we’ve created. It is important to doublecheck that you are on the correct branch when making changes, as it is possible to make changes on other branches. On the repo page below the branch name you can see a status bar, the new branch should say ‘This branch is up to date with main’, which means that nothing has been changed. As you make changes this will update to let you know that the branch you are working on is different from the current version of the shared documents, the ‘main’ branch. If you don’t complete your changes in one session and come back to GitHub at a later point, the repo will always open on the ‘main’ branch. You can get back to your branch by using the dropdown menu from the main repo page, or by going to the issue and clicking the branch under ‘Development’. 

Now we are ready to make changes. Click into the document you want to change. At the top of the file tree on the left you will still see the dropdown menu to change branches, so you can always doublecheck that you are on the correct branch. The file will open in the Preview mode, to make changes click the pencil icon at the top right of the file, hovering over this icon should say ‘Edit this file’. You will now see the document as a markdown file, with numbered lines. Above the top of the file you will see the file tree location, and at the end it should say ‘in’ followed by the branch name highlighted in blue. This is another chance to make sure that you are making your edits on the correct branch. From here you can make your desired changes to the document. Changes are made in the raw markdown document, you can toggle back to ‘Preview’ on the top left of the document to see how your changes look if you are playing with formatting or complex things, and ‘Edit’ will bring you back to markdown. Make whatever changes you like, and once you are happy with them we need to update our branch, essentially saving the changes. At the top right of the document you should see a green button that says ‘Commit changes…’. Commit is git nomenclature [about commits](https://docs.github.com/en/pull-requests/committing-changes-to-your-project/creating-and-editing-commits/about-commits) for saving changes to a repo. It essentially creates a snapshot of the entire repo, so all the bootcamp files in this case. If you change multiple documents you can save all the changes with a single commit. 

When you click the ‘Commit changes…’ button, a window will pop up. At the top is ‘Commit message’, which will be autopopulated with ‘Update’ and the filename you are working on. Change this message to a short description of the changes you made. The commit message is prominent in the history if looking back, so try to make a good commit message that will be easy for others to understand if changes need to be rolled back for some reason. Below that is an ‘Extended description’, you don’t need to put anything here, but if you want to add more details about the changes made for the record this is the place to put them. Below that are options to commit directly to the branch you are on or to create a new branch, leave this on ‘Commit directly to the …’ your branch name. Once you are happy with your commit message, press the green ‘Commit changes’ button at the bottom right. 

Above the top of the file you should now see your GitHub username and the commit message that you wrote. You can always see the last change to a file, directory in the repo, or the repo as a whole in the same place here. If you click out to one of the repo folders, or the repo as a whole, you should see a message saying ‘This branch is 1 commit ahead of main’. This tells you that your branch has changes from the current main version of the shared documents. The changes you have made in your safe branch have not been added to the current main version of the documents, they only exist on the branched version that you have been working on. You can make multiple changes and commit them on this branch, you could make changes to every document in the repo on this branch, and they will not alter the current version of the shared main documents until you want them to. In the bar above the file with your username and commit message, on the right side is a clock rewind symbol with History, clicking on this will show you all the commits that have ever happened for this file or folder. This is part of the power of git, not only is the history there, it is easy to see exactly what the differences are between versions, and to roll back to a previous version if something was actually better before the changes. Make all the changes you need to to resolve the issue you are working on, if this involves changing multiple documents you can commit for each one to document changes to individual documents, or you could change all the documents and make one commit at the end, either works as the changes will be tracked in detail. Your branch now has all the changes needed to address the issue you are working on, but the current version on the main looks just like it did before. We have to incorporate the changes we made to update the main documents, and it would be great if someone else could take a look at our changes and make sure they are good before they get added to the current version of the documents. We do this with a pull request [about pull requests](https://docs.github.com/en/pull-requests/collaborating-with-pull-requests/proposing-changes-to-your-work-with-pull-requests/about-pull-requests).

To make a pull request, if you are on a folder of the repo and you see the box with ‘This branch is x commit(s) ahead of main’, at the right end of that box is a dropdown that says ‘Contribute’. Click on this and a window should open with 2 buttons, ‘Compare’ and ‘Open pull request’. If you click ‘Compare’ you can examine exactly what changes you made. You can skip this though and click the green ‘Open pull request’, as it will show you the changes anyway. This will bring you to a new page, ‘Open a pull request’. Just below the top you should see a gray strip with ‘base:main’ in a dropdown box, an arrow pointing toward it, and a dropdown box with ‘compare:’ and the name of your branch. This indicates that you want to merge your branch changes to the main current version of the shared documents. Below this is ‘Add a title’, with an input box just like for the commit message. The history of pull requests features this title, so it is helpful to be descriptive to easily understand changes. Below that is ‘Add a description’, where you can add more details. Below that is a green button with ‘Create pull request’, don’t push that yet, but remember where it is as we want to push it at the end. Scrolling down will show a summary of the changes to be merged from your branch onto the main, a chance to review. Above and to the right of the green ‘Create pull request’ button is a panel with gears and ‘Reviewers’, ‘Assignees’, ‘Labels’, etc. Using the labels here like using the labels in the Issues will probably be helpful, so please do that. The pull request is a request for someone else to review the changes before they are added to the main documents. 

If there is a particular person you’d like to review and approve your merge you can add them to the reviewers. Once you are happy with all the options on this page, press ‘Create pull request’. If you want someone else to review the pull request before it is merged to main, you are done. You can review your pull request after opening it by clicking on ‘Pull requests’ at the top, next to ‘Issues’. If you do not feel like you need someone to review your changes, you can press the green button ‘Merge pull request’. A window will pop up if you want to add any comments about the merge, and then you can press the green button ‘Merge’. After a few moments you will see a message ‘Pull request successfully merged and closed’ with a message that your branch can be safely deleted. To keep the workspace clean, let’s do that, to the right in that box is a grey button ‘Delete branch’, press it. You don’t need to worry, even if there was a mistake the branch could always be recovered, a history of closed pull requests is kept. If you created the branch from an issue merging the pull request will close that issue, so if you didn’t completely address that issue go to the ‘Issues’ tab, ‘Closed’, and ‘Reopen issue’ at the bottom. If you completely addressed the issue then you can leave it closed, and thank you for tidying the workspace. There is an alternate way to create pull requests, through the ‘Pull requests’ tab at the top next to ‘Issues’. This way you’d have to change the ‘compare:’ dropdown to your branch, but after that things look the same. This way would not close the issue even if you made all the appropriate changes to deal with it, so if you go this route close the issue manually after the pull request if you merge yourself and the issue is completely fixed. 

I think that should get us up and running with collaborating on this multi-document project using GitHub. I hope this is helpful to everyone, it’s my first time working like this and trying to explain it so if there is feedback I am all ears.  

## Best practices

When you encounter something you want to provide feedback on, check the issues to see if anyone has already flagged it, if so you can comment that you see the same or add things. If no one has flagged that issue make a new issue. Please try to follow the issue title pattern of starting the title with ‘DESIGN:’, ‘TEST:’, whatever section it is in, followed by a short description. There are labels for each of the modules as well, please tag the issue with the appropriate label to make it easy to sort. This will help make it easier to work on, for example if you are only concerning yourself with the BUILD module, the labels will allow you to see just issues relating to BUILD if we use the labels properly. If you want to see issues for multiple modules, and/or the ALL label, you can modify the text in the search bar with an OR on the labels, for example:

is:issue state:open label:All OR label:Build  
is:issue state:open (label:All OR label:Build)

To make it easier to identify the issues in the documents, let’s try to put in the issue comment the lines from the markdown document. I've found it's easiest to read on the 'preview' tab, but then when you find something you want to comment on go into the 'code' tab, and find the lines of the document. If you select those lines they'll show up orange, to the left you'll see 3 horizontal dots, click on that and get the 'copy permalink'. Then open a new issue for your feedback, and if you paste the permalink into your comment it'll let people easily click into the document to see where exactly it is to make edits. It might also be helpful to copy the lines directly into your comment as well if the permalink doesn't bring the lines along.

If you find an issue that you want to work on please assign yourself to that issue so others know that you are working on it so we can minimize duplication of effort. If an issue has multiple parts and you can only resolve say 2 out of the 3 parts, do what you can and then comment about what is fixed and what still needs resolution, and if you can’t work on it further unassign yourself so others know no one is working on it. If you have completely resolved an issue you can close it to tidy the workspace, closed issues are kept so there’s no need to worry about making a mistake, it could always be reopened and examined if needed. 
